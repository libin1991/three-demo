(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){e.exports=n(2)(1)},function(e,t,n){},function(e,t){e.exports=vendor_library},function(e,t,n){"use strict";n.r(t);n(1);var a=n(0),r=function(e,t){var n,r,o,s,i;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new a.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.touches={ONE:a.TOUCH.ROTATE,TWO:a.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(l),c.update(),d=h.NONE},this.update=(n=new a.Vector3,r=(new a.Quaternion).setFromUnitVectors(e.up,new a.Vector3(0,1,0)),o=r.clone().inverse(),s=new a.Vector3,i=new a.Quaternion,function(){var e=c.object.position;return n.copy(e).sub(c.target),n.applyQuaternion(r),f.setFromVector3(n),c.autoRotate&&d===h.NONE&&_(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(f.theta+=g.theta*c.dampingFactor,f.phi+=g.phi*c.dampingFactor):(f.theta+=g.theta,f.phi+=g.phi),f.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,f.theta)),f.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(c.minDistance,Math.min(c.maxDistance,f.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),n.setFromSpherical(f),n.applyQuaternion(o),e.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(g.theta*=1-c.dampingFactor,g.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(g.set(0,0,0),y.set(0,0,0)),v=1,!!(b||s.distanceToSquared(c.object.position)>m||8*(1-i.dot(c.object.quaternion))>m)&&(c.dispatchEvent(l),s.copy(c.object.position),i.copy(c.object.quaternion),b=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",ee,!1),c.domElement.removeEventListener("mousedown",X,!1),c.domElement.removeEventListener("wheel",Z,!1),c.domElement.removeEventListener("touchstart",Q,!1),c.domElement.removeEventListener("touchend",$,!1),c.domElement.removeEventListener("touchmove",J,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",W,!1),c.domElement.removeEventListener("keydown",q,!1)};var c=this,l={type:"change"},u={type:"start"},p={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=h.NONE,m=1e-6,f=new a.Spherical,g=new a.Spherical,v=1,y=new a.Vector3,b=!1,T=new a.Vector2,M=new a.Vector2,E=new a.Vector2,S=new a.Vector2,w=new a.Vector2,L=new a.Vector2,R=new a.Vector2,x=new a.Vector2,A=new a.Vector2;function O(){return Math.pow(.95,c.zoomSpeed)}function _(e){g.theta-=e}function P(e){g.phi-=e}var C,N=(C=new a.Vector3,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),y.add(C)}),I=function(){var e=new a.Vector3;return function(t,n){!0===c.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(c.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),U=function(){var e=new a.Vector3;return function(t,n){var a=c.domElement;if(c.object.isPerspectiveCamera){var r=c.object.position;e.copy(r).sub(c.target);var o=e.length();o*=Math.tan(c.object.fov/2*Math.PI/180),N(2*t*o/a.clientHeight,c.object.matrix),I(2*n*o/a.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(N(t*(c.object.right-c.object.left)/c.object.zoom/a.clientWidth,c.object.matrix),I(n*(c.object.top-c.object.bottom)/c.object.zoom/a.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function H(e){c.object.isPerspectiveCamera?v/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function D(e){c.object.isPerspectiveCamera?v*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function F(e){T.set(e.clientX,e.clientY)}function k(e){S.set(e.clientX,e.clientY)}function j(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,n)}}function G(e){if(1==e.touches.length)S.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);S.set(t,n)}}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);R.set(0,a)}function V(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}E.subVectors(M,T).multiplyScalar(c.rotateSpeed);var a=c.domElement;_(2*Math.PI*E.x/a.clientHeight),P(2*Math.PI*E.y/a.clientHeight),T.copy(M)}function K(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}L.subVectors(w,S).multiplyScalar(c.panSpeed),U(L.x,L.y),S.copy(w)}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);x.set(0,a),A.set(0,Math.pow(x.y/R.y,c.zoomSpeed)),H(A.y),R.copy(x)}function X(e){if(!1!==c.enabled){var t;switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:t=c.mouseButtons.LEFT;break;case 1:t=c.mouseButtons.MIDDLE;break;case 2:t=c.mouseButtons.RIGHT;break;default:t=-1}switch(t){case a.MOUSE.DOLLY:if(!1===c.enableZoom)return;!function(e){R.set(e.clientX,e.clientY)}(e),d=h.DOLLY;break;case a.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;k(e),d=h.PAN}else{if(!1===c.enableRotate)return;F(e),d=h.ROTATE}break;case a.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;F(e),d=h.ROTATE}else{if(!1===c.enablePan)return;k(e),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",W,!1),c.dispatchEvent(u))}}function Y(e){if(!1!==c.enabled)switch(e.preventDefault(),d){case h.ROTATE:if(!1===c.enableRotate)return;!function(e){M.set(e.clientX,e.clientY),E.subVectors(M,T).multiplyScalar(c.rotateSpeed);var t=c.domElement;_(2*Math.PI*E.x/t.clientHeight),P(2*Math.PI*E.y/t.clientHeight),T.copy(M),c.update()}(e);break;case h.DOLLY:if(!1===c.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),A.subVectors(x,R),A.y>0?H(O()):A.y<0&&D(O()),R.copy(x),c.update()}(e);break;case h.PAN:if(!1===c.enablePan)return;!function(e){w.set(e.clientX,e.clientY),L.subVectors(w,S).multiplyScalar(c.panSpeed),U(L.x,L.y),S.copy(w),c.update()}(e)}}function W(e){!1!==c.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",W,!1),c.dispatchEvent(p),d=h.NONE)}function Z(e){!1===c.enabled||!1===c.enableZoom||d!==h.NONE&&d!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(u),function(e){e.deltaY<0?D(O()):e.deltaY>0&&H(O()),c.update()}(e),c.dispatchEvent(p))}function q(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:U(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:U(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:U(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:U(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function Q(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case a.TOUCH.ROTATE:if(!1===c.enableRotate)return;j(e),d=h.TOUCH_ROTATE;break;case a.TOUCH.PAN:if(!1===c.enablePan)return;G(e),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(c.touches.TWO){case a.TOUCH.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&B(e),c.enablePan&&G(e)}(e),d=h.TOUCH_DOLLY_PAN;break;case a.TOUCH.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&B(e),c.enableRotate&&j(e)}(e),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&c.dispatchEvent(u)}}function J(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),d){case h.TOUCH_ROTATE:if(!1===c.enableRotate)return;V(e),c.update();break;case h.TOUCH_PAN:if(!1===c.enablePan)return;K(e),c.update();break;case h.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&z(e),c.enablePan&&K(e)}(e),c.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&z(e),c.enableRotate&&V(e)}(e),c.update();break;default:d=h.NONE}}function $(e){!1!==c.enabled&&(c.dispatchEvent(p),d=h.NONE)}function ee(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",ee,!1),c.domElement.addEventListener("mousedown",X,!1),c.domElement.addEventListener("wheel",Z,!1),c.domElement.addEventListener("touchstart",Q,!1),c.domElement.addEventListener("touchend",$,!1),c.domElement.addEventListener("touchmove",J,!1),c.domElement.addEventListener("keydown",q,!1),-1===c.domElement.tabIndex&&(c.domElement.tabIndex=0),this.update()};(r.prototype=Object.create(a.EventDispatcher.prototype)).constructor=r;var o=function(e,t){r.call(this,e,t),this.mouseButtons.LEFT=a.MOUSE.PAN,this.mouseButtons.RIGHT=a.MOUSE.ROTATE,this.touches.ONE=a.TOUCH.PAN,this.touches.TWO=a.TOUCH.DOLLY_ROTATE};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(o.prototype=Object.create(a.EventDispatcher.prototype)).constructor=o;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=new a.WebGLRenderer,this.scene=null,this.camera=null,this.light=null,this.controls=null}var t,n,o;return t=e,(n=[{key:"addScene",value:function(){this.scene=new a.Scene,this.scene.background=new a.Color(10526880),this.scene.fog=new a.Fog(10526880,100,500)}},{key:"addLight",value:function(){this.light=new a.DirectionalLight(16777215,1),this.light.position.set(0,20,500).normalize(),this.scene.add(this.light)}},{key:"addCamera",value:function(){this.camera=new a.PerspectiveCamera(20,window.innerWidth/window.innerHeight,1,500),this.camera.position.set(0,0,200),this.controls=new r(this.camera,this.renderer.domElement)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.render()}},{key:"appendWebGL",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"animate",value:function(){this.controls.update(),this.render()}},{key:"init",value:function(){this.addScene(),this.addCamera(),this.addLight(),this.appendWebGL()}}])&&s(t.prototype,n),o&&s(t,o),e}(),c=n.p+"assets/img/96a99789.jpg";function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.mesh=null}var t,n,r;return t=e,(n=[{key:"appendMesh",value:function(){var e=this,t=new a.CubeGeometry(10,10,10);(new a.TextureLoader).load(c,(function(n){var r=new a.MeshPhongMaterial({map:n});e.mesh=new a.Mesh(t,r),e.mesh.position.z=-50,e.props.scene.add(e.mesh),e.props.render()}))}},{key:"animate",value:function(){this.mesh&&(this.mesh.rotation.x+=.04,this.mesh.rotation.y+=.02)}},{key:"init",value:function(){this.appendMesh()}}])&&l(t.prototype,n),r&&l(t,r),e}(),p=n.p+"assets/glb/bc8bf37f.glb";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(){function e(e){a.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(a.Loader.prototype),{constructor:e,load:function(e,t,n,r){var o,s=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:a.LoaderUtils.extractUrlBase(e),s.manager.itemStart(e);var i=function(t){r?r(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},c=new a.FileLoader(s.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),"use-credentials"===s.crossOrigin&&c.setWithCredentials(!0),c.load(e,(function(n){try{s.parse(n,o,(function(n){t(n),s.manager.itemEnd(e)}),i)}catch(e){i(e)}}),n,i)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,c,l){var h,m={};if("string"==typeof e)h=e;else if(a.LoaderUtils.decodeText(new Uint8Array(e,0,4))===i){try{m[n.KHR_BINARY_GLTF]=new u(e)}catch(e){return void(l&&l(e))}h=m[n.KHR_BINARY_GLTF].content}else h=a.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(h);if(void 0===v.asset||v.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(v.extensionsUsed)for(var y=0;y<v.extensionsUsed.length;++y){var b=v.extensionsUsed[y],T=v.extensionsRequired||[];switch(b){case n.KHR_LIGHTS_PUNCTUAL:m[b]=new o(v);break;case n.KHR_MATERIALS_UNLIT:m[b]=new s;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new f;break;case n.KHR_DRACO_MESH_COMPRESSION:m[b]=new p(v,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:m[b]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:m[b]=new d;break;case n.KHR_MESH_QUANTIZATION:m[b]=new g;break;default:T.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}new G(v,m,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(c,l)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function s(){this.name=n.KHR_MATERIALS_UNLIT}o.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new a.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var o=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new a.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new a.PointLight(r)).distance=o;break;case"spot":(t=new a.SpotLight(r)).distance=o,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},s.prototype.getMaterialType=function(){return a.MeshBasicMaterial},s.prototype.extendParams=function(e,t,n){var r=[];e.color=new a.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var s=o.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==o.baseColorTexture&&r.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(r)};var i="glTF",c=1313821514,l=5130562;function u(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:a.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==i)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(e,12),o=0;o<r.byteLength;){var s=r.getUint32(o,!0);o+=4;var u=r.getUint32(o,!0);if(o+=4,u===c){var p=new Uint8Array(e,12+o,s);this.content=a.LoaderUtils.decodeText(p)}else if(u===l){var h=12+o;this.body=e.slice(h,h+s)}o+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function p(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function d(){this.name=n.KHR_TEXTURE_TRANSFORM}function m(e){a.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),i={specular:{value:(new a.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(var a in i)e.uniforms[a]=i[a];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",o),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function f(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return m},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new a.Color(1,1,1),e.opacity=1;var o=[];if(Array.isArray(r.diffuseFactor)){var s=r.diffuseFactor;e.color.fromArray(s),e.opacity=s[3]}if(void 0!==r.diffuseTexture&&o.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new a.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new a.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var i=r.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",i)),o.push(n.assignTexture(e,"specularMap",i))}return Promise.all(o)},createMaterial:function(e){var t=new m(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=a.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function g(){this.name=n.KHR_MESH_QUANTIZATION}function v(e,t,n,r){a.Interpolant.call(this,e,t,n,r)}p.prototype.decodePrimitive=function(e,t){var n=this.json,a=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},i={},c={};for(var l in o){var u=O[l]||l.toLowerCase();s[u]=o[l]}for(l in e.attributes){u=O[l]||l.toLowerCase();if(void 0!==o[l]){var p=n.accessors[e.attributes[l]],h=L[p.componentType];c[u]=h,i[u]=!0===p.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){a.decodeDracoFile(e,(function(e){for(var n in e.attributes){var a=e.attributes[n],r=i[n];void 0!==r&&(a.normalized=r)}t(e)}),s,c)}))}))},d.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},m.prototype=Object.create(a.MeshStandardMaterial.prototype),m.prototype.constructor=m,m.prototype.copy=function(e){return a.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},v.prototype=Object.create(a.Interpolant.prototype),v.prototype.constructor=v,v.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,r=e*a*3+a,o=0;o!==a;o++)t[o]=n[r+o];return t},v.prototype.beforeStart_=v.prototype.copySampleValue_,v.prototype.afterEnd_=v.prototype.copySampleValue_,v.prototype.interpolate_=function(e,t,n,a){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,i=2*s,c=3*s,l=a-t,u=(n-t)/l,p=u*u,h=p*u,d=e*c,m=d-c,f=-2*h+3*p,g=h-p,v=1-f,y=g-p+u,b=0;b!==s;b++){var T=o[m+b+s],M=o[m+b+i]*l,E=o[d+b+s],S=o[d+b]*l;r[b]=v*T+y*M+f*E+g*S}return r};var y=0,b=1,T=2,M=3,E=4,S=5,w=6,L={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R={9728:a.NearestFilter,9729:a.LinearFilter,9984:a.NearestMipmapNearestFilter,9985:a.LinearMipmapNearestFilter,9986:a.NearestMipmapLinearFilter,9987:a.LinearMipmapLinearFilter},x={33071:a.ClampToEdgeWrapping,33648:a.MirroredRepeatWrapping,10497:a.RepeatWrapping},A={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},P={CUBICSPLINE:void 0,LINEAR:a.InterpolateLinear,STEP:a.InterpolateDiscrete},C="OPAQUE",N="MASK",I="BLEND",U={"image/png":a.RGBAFormat,"image/jpeg":a.RGBFormat};function H(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function D(e,t,n){for(var a in n.extensions)void 0===e[a]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[a]=n.extensions[a])}function F(e,t){void 0!==t.extras&&("object"===h(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function k(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,a=t.weights.length;n<a;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,a=r.length;n<a;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j(e){for(var t="",n=Object.keys(e).sort(),a=0,r=n.length;a<r;a++)t+=n[a]+":"+e[n[a]]+";";return t}function G(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new a.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new a.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function B(e,t,n){var r=t.attributes,o=[];function s(t,a){return n.getDependency("accessor",t).then((function(t){e.setAttribute(a,t)}))}for(var i in r){var c=O[i]||i.toLowerCase();c in e.attributes||o.push(s(r[i],c))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(l)}return F(e,t),function(e,t,n){var r=t.attributes,o=new a.Box3;if(void 0!==r.POSITION){var s=(d=n.json.accessors[r.POSITION]).min,i=d.max;if(void 0!==s&&void 0!==i){o.set(new a.Vector3(s[0],s[1],s[2]),new a.Vector3(i[0],i[1],i[2]));var c=t.targets;if(void 0!==c)for(var l=new a.Vector3,u=0,p=c.length;u<p;u++){var h=c[u];if(void 0!==h.POSITION){var d;s=(d=n.json.accessors[h.POSITION]).min,i=d.max;void 0!==s&&void 0!==i?(l.setX(Math.max(Math.abs(s[0]),Math.abs(i[0]))),l.setY(Math.max(Math.abs(s[1]),Math.abs(i[1]))),l.setZ(Math.max(Math.abs(s[2]),Math.abs(i[2]))),o.expandByVector(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}e.boundingBox=o;var m=new a.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){for(var a=!1,r=!1,o=0,s=t.length;o<s;o++){if(void 0!==(l=t[o]).POSITION&&(a=!0),void 0!==l.NORMAL&&(r=!0),a&&r)break}if(!a&&!r)return Promise.resolve(e);var i=[],c=[];for(o=0,s=t.length;o<s;o++){var l=t[o];if(a){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;i.push(u)}if(r){u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;c.push(u)}}return Promise.all([Promise.all(i),Promise.all(c)]).then((function(t){var n=t[0],o=t[1];return a&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function V(e,t){var n=e.getIndex();if(null===n){var r=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var s=0;s<o.count;s++)r.push(s);e.setIndex(r),n=e.getIndex()}var i=n.count-2,c=[];if(t===a.TriangleFanDrawMode)for(s=1;s<=i;s++)c.push(n.getX(0)),c.push(n.getX(s)),c.push(n.getX(s+1));else for(s=0;s<i;s++)s%2==0?(c.push(n.getX(s)),c.push(n.getX(s+1)),c.push(n.getX(s+2))):(c.push(n.getX(s+2)),c.push(n.getX(s+1)),c.push(n.getX(s)));c.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(c),l}return G.prototype.parse=function(e,t){var n=this,a=this.json,r=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][a.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:a.asset,parser:n,userData:{}};D(r,o,a),F(o,a),e(o)})).catch(t)},G.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],a={},r={},o=0,s=t.length;o<s;o++)for(var i=t[o].joints,c=0,l=i.length;c<l;c++)e[i[c]].isBone=!0;for(var u=0,p=e.length;u<p;u++){var h=e[u];void 0!==h.mesh&&(void 0===a[h.mesh]&&(a[h.mesh]=r[h.mesh]=0),a[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=a,this.json.meshUses=r},G.prototype.getDependency=function(e,t){var a=e+":"+t,r=this.cache.get(a);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(a,r)}return r},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,a=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(a.map((function(t,a){return n.getDependency(e,a)}))),this.cache.add(e,t)}return t},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],a=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,n){a.load(H(t.uri,r.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,a=t.byteOffset||0;return e.slice(a,a+n)}))},G.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,s,i=e[0],c=A[r.type],l=L[r.componentType],u=l.BYTES_PER_ELEMENT,p=u*c,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,m=!0===r.normalized;if(d&&d!==p){var f=Math.floor(h/d),g="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count,v=t.cache.get(g);v||(o=new l(i,f*d,r.count*d/u),v=new a.InterleavedBuffer(o,d/u),t.cache.add(g,v)),s=new a.InterleavedBufferAttribute(v,c,h%d/u,m)}else o=null===i?new l(r.count*c):new l(i,h,r.count*c),s=new a.BufferAttribute(o,c,m);if(void 0!==r.sparse){var y=A.SCALAR,b=L[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,E=new b(e[1],T,r.sparse.count*y),S=new l(e[2],M,r.sparse.count*c);null!==i&&(s=new a.BufferAttribute(s.array.slice(),s.itemSize,s.normalized));for(var w=0,R=E.length;w<R;w++){var x=E[w];if(s.setX(x,S[w*c]),c>=2&&s.setY(x,S[w*c+1]),c>=3&&s.setZ(x,S[w*c+2]),c>=4&&s.setW(x,S[w*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return s}))},G.prototype.loadTexture=function(e){var t,r=this,o=this.json,s=this.options,i=this.textureLoader,c=window.URL||window.webkitURL,l=o.textures[e],u=l.extensions||{},p=(t=u[n.MSFT_TEXTURE_DDS]?o.images[u[n.MSFT_TEXTURE_DDS].source]:o.images[l.source]).uri,h=!1;return void 0!==t.bufferView&&(p=r.getDependency("bufferView",t.bufferView).then((function(e){h=!0;var n=new Blob([e],{type:t.mimeType});return p=c.createObjectURL(n)}))),Promise.resolve(p).then((function(e){var t=s.manager.getHandler(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:i),new Promise((function(n,a){t.load(H(e,s.path),n,void 0,a)}))})).then((function(e){!0===h&&c.revokeObjectURL(p),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in U&&(e.format=U[t.mimeType]);var n=(o.samplers||{})[l.sampler]||{};return e.magFilter=R[n.magFilter]||a.LinearFilter,e.minFilter=R[n.minFilter]||a.LinearMipmapLinearFilter,e.wrapS=x[n.wrapS]||a.RepeatWrapping,e.wrapT=x[n.wrapT]||a.RepeatWrapping,e}))},G.prototype.assignTexture=function(e,t,r){var o=this;return this.getDependency("texture",r.index).then((function(s){if(!s.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":s.format=a.RGBFormat}if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),o.extensions[n.KHR_TEXTURE_TRANSFORM]){var i=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;i&&(s=o.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(s,i))}e[t]=s}))},G.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=(this.extensions,void 0!==t.attributes.tangent),o=void 0!==t.attributes.color,s=void 0===t.attributes.normal,i=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,l=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,p=this.cache.get(u);p||(p=new a.PointsMaterial,a.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.sizeAttenuation=!1,this.cache.add(u,p)),n=p}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var h=this.cache.get(u);h||(h=new a.LineBasicMaterial,a.Material.prototype.copy.call(h,n),h.color.copy(n.color),this.cache.add(u,h)),n=h}if(r||o||s||i||c){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),i&&(u+="skinning:"),r&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),s&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var d=this.cache.get(u);d||(d=n.clone(),i&&(d.skinning=!0),r&&(d.vertexTangents=!0),o&&(d.vertexColors=a.VertexColors),s&&(d.flatShading=!0),c&&(d.morphTargets=!0),l&&(d.morphNormals=!0),this.cache.add(u,d)),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",new a.BufferAttribute(t.attributes.uv.array,2)),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),e.material=n},G.prototype.loadMaterial=function(e){var t,r=this.json,o=this.extensions,s=r.materials[e],i={},c=s.extensions||{},l=[];if(c[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(i,s,this))}else if(c[n.KHR_MATERIALS_UNLIT]){var p=o[n.KHR_MATERIALS_UNLIT];t=p.getMaterialType(),l.push(p.extendParams(i,s,this))}else{t=a.MeshStandardMaterial;var h=s.pbrMetallicRoughness||{};if(i.color=new a.Color(1,1,1),i.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;i.color.fromArray(d),i.opacity=d[3]}void 0!==h.baseColorTexture&&l.push(this.assignTexture(i,"map",h.baseColorTexture)),i.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,i.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(l.push(this.assignTexture(i,"metalnessMap",h.metallicRoughnessTexture)),l.push(this.assignTexture(i,"roughnessMap",h.metallicRoughnessTexture)))}!0===s.doubleSided&&(i.side=a.DoubleSide);var f=s.alphaMode||C;return f===I?i.transparent=!0:(i.transparent=!1,f===N&&(i.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==a.MeshBasicMaterial&&(l.push(this.assignTexture(i,"normalMap",s.normalTexture)),i.normalScale=new a.Vector2(1,1),void 0!==s.normalTexture.scale&&i.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==a.MeshBasicMaterial&&(l.push(this.assignTexture(i,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(i.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==a.MeshBasicMaterial&&(i.emissive=(new a.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==a.MeshBasicMaterial&&l.push(this.assignTexture(i,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var e;return e=t===m?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new t(i),void 0!==s.name&&(e.name=s.name),e.map&&(e.map.encoding=a.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=a.sRGBEncoding),F(e,s),s.extensions&&D(o,e,s),e}))},G.prototype.loadGeometries=function(e){var t=this,r=this.extensions,o=this.primitiveCache;function s(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return B(n,e,t)}))}for(var i,c,l=[],u=0,p=e.length;u<p;u++){var h,d=e[u],m=(c=void 0,(c=(i=d).extensions&&i.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+c.bufferView+":"+c.indices+":"+j(c.attributes):i.indices+":"+j(i.attributes)+":"+i.mode),f=o[m];if(f)l.push(f.promise);else h=d.extensions&&d.extensions[n.KHR_DRACO_MESH_COMPRESSION]?s(d):B(new a.BufferGeometry,d,t),o[m]={primitive:d,promise:h},l.push(h)}return Promise.all(l)},G.prototype.loadMesh=function(e){for(var t,n=this,r=this.json.meshes[e],o=r.primitives,s=[],i=0,c=o.length;i<c;i++){var l=void 0===o[i].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new a.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:a.FrontSide})),t.DefaultMaterial):this.getDependency("material",o[i].material);s.push(l)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(t){for(var s=t.slice(0,t.length-1),i=t[t.length-1],c=[],l=0,u=i.length;l<u;l++){var p,h=i[l],d=o[l],m=s[l];if(d.mode===E||d.mode===S||d.mode===w||void 0===d.mode)!0!==(p=!0===r.isSkinnedMesh?new a.SkinnedMesh(h,m):new a.Mesh(h,m)).isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),d.mode===S?p.geometry=V(p.geometry,a.TriangleStripDrawMode):d.mode===w&&(p.geometry=V(p.geometry,a.TriangleFanDrawMode));else if(d.mode===b)p=new a.LineSegments(h,m);else if(d.mode===M)p=new a.Line(h,m);else if(d.mode===T)p=new a.LineLoop(h,m);else{if(d.mode!==y)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);p=new a.Points(h,m)}Object.keys(p.geometry.morphAttributes).length>0&&k(p,r),p.name=r.name||"mesh_"+e,i.length>1&&(p.name+="_"+l),F(p,r),n.assignFinalMaterial(p),c.push(p)}if(1===c.length)return c[0];var f=new a.Group;for(l=0,u=c.length;l<u;l++)f.add(c[l]);return f}))},G.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new a.PerspectiveCamera(a.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new a.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(t.name=n.name),F(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},G.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],r=[],o=[],s=[],i=[],c=0,l=t.channels.length;c<l;c++){var u=t.channels[c],p=t.samplers[u.sampler],h=u.target,d=void 0!==h.node?h.node:h.id,m=void 0!==t.parameters?t.parameters[p.input]:p.input,f=void 0!==t.parameters?t.parameters[p.output]:p.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",f)),s.push(p),i.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(o),Promise.all(s),Promise.all(i)]).then((function(n){for(var r=n[0],o=n[1],s=n[2],i=n[3],c=n[4],l=[],u=0,p=r.length;u<p;u++){var h=r[u],d=o[u],m=s[u],f=i[u],g=c[u];if(void 0!==h){var y;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,_[g.path]){case _.weights:y=a.NumberKeyframeTrack;break;case _.rotation:y=a.QuaternionKeyframeTrack;break;case _.position:case _.scale:default:y=a.VectorKeyframeTrack}var b=h.name?h.name:h.uuid,T=void 0!==f.interpolation?P[f.interpolation]:a.InterpolateLinear,M=[];_[g.path]===_.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&M.push(e.name?e.name:e.uuid)})):M.push(b);var E=m.array;if(m.normalized){var S;if(E.constructor===Int8Array)S=1/127;else if(E.constructor===Uint8Array)S=1/255;else if(E.constructor==Int16Array)S=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var w=new Float32Array(E.length),L=0,R=E.length;L<R;L++)w[L]=E[L]*S;E=w}for(L=0,R=M.length;L<R;L++){var x=new y(M[L]+"."+_[g.path],d.array,E,T);"CUBICSPLINE"===f.interpolation&&(x.createInterpolant=function(e){return new v(this.times,this.values,this.getValueSize()/3,e)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(x)}}}var A=void 0!==t.name?t.name:"animation_"+e;return new a.AnimationClip(A,void 0,l)}))},G.prototype.loadNode=function(e){var t,r=this.json,o=this.extensions,s=this,i=r.meshReferences,c=r.meshUses,l=r.nodes[e];return(t=[],void 0!==l.mesh&&t.push(s.getDependency("mesh",l.mesh).then((function(e){var t;if(i[l.mesh]>1){var n=c[l.mesh]++;(t=e.clone()).name+="_instance_"+n}else t=e;return void 0!==l.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=l.weights.length;t<n;t++)e.morphTargetInfluences[t]=l.weights[t]})),t}))),void 0!==l.camera&&t.push(s.getDependency("camera",l.camera)),l.extensions&&l.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&t.push(s.getDependency("light",l.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===l.isBone?new a.Bone:e.length>1?new a.Group:1===e.length?e[0]:new a.Object3D)!==e[0])for(var n=0,r=e.length;n<r;n++)t.add(e[n]);if(void 0!==l.name&&(t.userData.name=l.name,t.name=a.PropertyBinding.sanitizeNodeName(l.name)),F(t,l),l.extensions&&D(o,t,l),void 0!==l.matrix){var s=new a.Matrix4;s.fromArray(l.matrix),t.applyMatrix4(s)}else void 0!==l.translation&&t.position.fromArray(l.translation),void 0!==l.rotation&&t.quaternion.fromArray(l.rotation),void 0!==l.scale&&t.scale.fromArray(l.scale);return t}))},G.prototype.loadScene=function(){function e(t,n,r,o){var s=r.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===s.skin?e:o.getDependency("skin",s.skin).then((function(e){for(var n=[],a=0,r=(t=e).joints.length;a<r;a++)n.push(o.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],o=[],s=0,i=n.length;s<i;s++){var c=n[s];if(c){r.push(c);var l=new a.Matrix4;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*s),o.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}e.bind(new a.Skeleton(r,o),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var a=[];if(s.children)for(var i=s.children,c=0,l=i.length;c<l;c++){var u=i[c];a.push(e(u,t,r,o))}return Promise.all(a)}))}return function(t){var n=this.json,r=this.extensions,o=this.json.scenes[t],s=new a.Scene;void 0!==o.name&&(s.name=o.name),F(s,o),o.extensions&&D(r,s,o);for(var i=o.nodes||[],c=[],l=0,u=i.length;l<u;l++)c.push(e(i[l],s,n,this));return Promise.all(c).then((function(){return s}))}}(),e}();function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.morph=null,this.clock=new a.Clock,this.mixer=new a.AnimationMixer(t.scene)}var t,n,r;return t=e,(n=[{key:"addMorph",value:function(e,t,n,a,r,o,s,i){(e=e.clone()).material=e.material.clone(),i&&e.material.color.offsetHSL(0,.5*Math.random()-.25,.5*Math.random()-.25),e.speed=n,this.mixer.clipAction(t,e).setDuration(a).startAt(-a*Math.random()).play(),e.position.set(r,o,s),e.rotation.y=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,this.props.scene.add(e),this.morph=e}},{key:"load",value:function(){var e=this;(new d).load(p,(function(t){var n=t.scene;n.position.set(0,10,-80),e.props.scene.add(n);var a=t.scene.children[0],r=t.animations[0];e.addMorph(a,r,450,.5,500-500*Math.random(),300,700)}))}},{key:"animate",value:function(){var e=this.clock.getDelta();this.mixer.update(e),this.morph&&(this.morph.position.x+=this.morph.speed*e,this.morph.position.x>2e3&&(this.morph.position.x=-1e3-500*Math.random()))}},{key:"init",value:function(){this.load()}}])&&m(t.prototype,n),r&&m(t,r),e}();!function(){console.log("0.1.0","prod");var e=new i;e.init();var t=new u(e);t.init();var n=new f(e);n.init(),function a(){t.animate(),n.animate(),e.animate(),requestAnimationFrame(a)}()}()}],[[3,1]]]);